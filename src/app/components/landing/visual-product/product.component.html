<div class="product-card" (click)="navigateToProduct()">
  <div class="product-image" 
       (mouseenter)="showSecondaryImage()" 
       (mouseleave)="showPrimaryImage()">
    @defer (on viewport) {
      <ipi-img
        [src]="product.images[0]"
        [ariaLabel]="product.title"
        [class.hidden]="isSecondaryImageVisible">
      </ipi-img>
      <ipi-img
        [src]="product.images[1]"
        [ariaLabel]="product.title"
        [class.hidden]="!isSecondaryImageVisible">
      </ipi-img>
    } @placeholder {
      <div class="image-placeholder"></div>
    }
  </div>
  <div class="product-info">
    <h3 class="product-title">{{ product.title }}</h3>
    <p class="product-price">{{ rate ? (product.price * rate).toFixed(2) + ' BGN' : product.price + ' CNY' }}</p>
    <div class="product-actions">
      <button class="action-button" (click)="addToCart($event)">
        <img src="assets/icons/cart.svg" alt="Add to cart">
      </button>
      <button class="action-button" (click)="addToWishlist($event)">
        <img src="assets/icons/heart.svg" alt="Add to wishlist">
      </button>
    </div>
  </div>
</div>
