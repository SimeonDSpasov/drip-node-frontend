@if (options) {
    @if (options.formControlName && options.formGroup) {
        <div class="label-wrapper">
            @if (options.label !== '') {
                <label>{{ options.label }}</label>
             }
        </div>

        <div tabindex="0" 
            #datepicker 
            class="datepicker"
            [class.datepicker-error]="formErrorMessage"
            (click)="this.activateControl()">
            <span
                class="datepicker-value"
                role="textbox" 
                aria-readonly="true" 
                aria-label="Selected date"
                aria-live="polite">
                    {{ getDisplayValue() }}
            </span>

            <div class="svg-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#f1f1f1" 
                    viewBox="0 0 256 256"><path d="M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-68-76a12,12,0,1,1-12-12A12,12,0,0,1,140,132Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,132ZM96,172a12,12,0,1,1-12-12A12,12,0,0,1,96,172Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,140,172Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,172Z"></path>
                </svg>
            </div>
        </div>

        <div class="footer">
                <div>{{ getformErrorMessage() }}</div>
        </div>

        @if (shouldShowCalendar) {
            <div #calendar class="calendar">
                <ipi-calendar
                    [(activeDate)]="activeDate"
                    [(selected)]="selectedDate"
                    [minDate]="minDate"
                    [maxDate]="maxDate"
                    (calendarClose)="onCloseKeyDown($event)"
                    (userSelection)="handleUserSelection($event)"
                    (userDragDrop)="handleDragAndDropEnd($event)">
                </ipi-calendar>
            </div>
        }
    }
}
