import{a as V}from"./chunk-4OHIAHYS.js";import{j as O}from"./chunk-XSVUNA7Q.js";import{i as c,j as E,k as I,l as B,n as N,o as j,p as F,r as q,s as k,w as T,x as U,z as W}from"./chunk-IVAB2QGM.js";import{Ba as m,Fa as u,Ka as x,Oa as h,R as M,Sb as D,Tb as L,W as b,Ya as f,ba as p,ca as g,cb as a,d as y,db as r,fb as P,gb as R,kb as v,lb as s,pb as w,qb as C,rb as _}from"./chunk-KGVT5ALD.js";var S=class n{constructor(e,t){this.xSSService=e;this.httpService=t}register(e){let t=this.xSSService.clean(e),i=c.apiUrl+c.endpoints.auth.register;return this.httpService.post(i,t)}login(e){let t=this.xSSService.clean(e),i=c.apiUrl+c.endpoints.auth.login;return this.httpService.post(i,t)}static \u0275fac=function(t){return new(t||n)(b(E),b(I))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function X(n,e){n&1&&(a(0,"div",12),s(1," Please enter a valid email address "),r())}function G(n,e){n&1&&(a(0,"div",12),s(1," Password is required "),r())}var A=class n{constructor(e,t,i){this.userService=e;this.authService=t;this.router=i}loginData={email:"",password:""};onSubmit(){this.loginData.email&&this.loginData.password&&this.authService.login(this.loginData).subscribe({next:e=>y(this,null,function*(){yield this.userService.setUserFromDatabase(),this.router.navigate(["/admin"])}),error:e=>{console.error("Login failed:",e)}})}static \u0275fac=function(t){return new(t||n)(u(V),u(S),u(O))};static \u0275cmp=x({type:n,selectors:[["app-login"]],decls:19,vars:5,consts:[["loginForm","ngForm"],["email","ngModel"],["password","ngModel"],[1,"login-container"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","email","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"error-message"]],template:function(t,i){if(t&1){let d=P();a(0,"div",3)(1,"form",4,0),R("ngSubmit",function(){return p(d),g(i.onSubmit())}),a(3,"h2"),s(4,"Login"),r(),a(5,"div",5)(6,"label",6),s(7,"Email"),r(),a(8,"input",7,1),_("ngModelChange",function(o){return p(d),C(i.loginData.email,o)||(i.loginData.email=o),g(o)}),r(),h(10,X,2,0,"div",8),r(),a(11,"div",5)(12,"label",9),s(13,"Password"),r(),a(14,"input",10,2),_("ngModelChange",function(o){return p(d),C(i.loginData.password,o)||(i.loginData.password=o),g(o)}),r(),h(16,G,2,0,"div",8),r(),a(17,"button",11),s(18,"Login"),r()()()}if(t&2){let d=v(2),l=v(9),o=v(15);m(8),w("ngModel",i.loginData.email),m(2),f("ngIf",l.invalid&&(l.dirty||l.touched)),m(4),w("ngModel",i.loginData.password),m(2),f("ngIf",o.invalid&&(o.dirty||o.touched)),m(),f("disabled",d.invalid)}},dependencies:[L,D,W,k,B,N,j,T,U,q,F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5}form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%;max-width:400px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#666}input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer;margin-top:1rem}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}"]})};export{A as LoginComponent};
