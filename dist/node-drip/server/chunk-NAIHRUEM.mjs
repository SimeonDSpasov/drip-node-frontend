import './polyfills.server.mjs';
import{b as A}from"./chunk-FHVB4RTP.mjs";import{B as v,Cb as L,Da as I,Ea as s,G as d,Ja as C,K as f,N as u,S as h,Yb as o,Z as b,j as c,ja as S,jb as E,kb as y,o as g,x as p}from"./chunk-MZTDPML7.mjs";var l=class r{constructor(e,t){this.http=e;this.document=t}svgs=new Map;svgsLoading=new Map;defaultSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m 4 1 c -1.644531 0 -3 1.355469 -3 3 v 1 h 1 v -1 c 0 -1.109375 0.890625 -2 2 -2 h 1 v -1 z m 2 0 v 1 h 4 v -1 z m 5 0 v 1 h 1 c 1.109375 0 2 0.890625 2 2 v 1 h 1 v -1 c 0 -1.644531 -1.355469 -3 -3 -3 z m -5 4 c -0.550781 0 -1 0.449219 -1 1 s 0.449219 1 1 1 s 1 -0.449219 1 -1 s -0.449219 -1 -1 -1 z m -5 1 v 4 h 1 v -4 z m 13 0 v 4 h 1 v -4 z m -4.5 2 l -2 2 l -1.5 -1 l -2 2 v 0.5 c 0 0.5 0.5 0.5 0.5 0.5 h 7 s 0.472656 -0.035156 0.5 -0.5 v -1 z m -8.5 3 v 1 c 0 1.644531 1.355469 3 3 3 h 1 v -1 h -1 c -1.109375 0 -2 -0.890625 -2 -2 v -1 z m 13 0 v 1 c 0 1.109375 -0.890625 2 -2 2 h -1 v 1 h 1 c 1.644531 0 3 -1.355469 3 -3 v -1 z m -8 3 v 1 h 4 v -1 z m 0 0" fill="#2e3434" fill-opacity="0.34902"/></svg>';loadImg(e){if(!e.endsWith(".svg"))return e;if(this.svgs.has(e))return c(this.svgs.get(e));if(this.svgsLoading.has(e))return this.svgsLoading.get(e);let t=this.getSvg(e).pipe(p(()=>c(this.defaultSvg)),g(i=>this.createSVG(i)),f(i=>this.svgs.set(e,i)),v(()=>this.svgsLoading.delete(e)),d());return this.svgsLoading.set(e,t),t}getSvg(e){return this.http.get(e,{responseType:"text"})}createSVG(e){let t=this.document.createElement("DIV");return t.innerHTML=e,t.querySelector("svg")}static \u0275fac=function(t){return new(t||r)(h(A),h(o))};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var j=["*"],m=class{loaded=!1;imgSub},N=class r{constructor(e,t,i,n,a){this.element=e;this.renderer=t;this.imgService=i;this.document=n;this.changeDetectorRef=a;this.changeDetectorRef.detach()}src;ariaLabel;helper=new m;ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}ngOnChanges(e){this.helper.loaded&&(e.src&&(this.destroy(),this.init()),e.ariaLabel&&this.setAriaLabel(e.ariaLabel.currentValue))}init(){if(!this.src||!this.ariaLabel)return;let e=this.imgService.loadImg(this.src);if(typeof e=="string"){this.initImage(e);return}this.helper.imgSub=e.subscribe(t=>{this.initSvg(t)})}destroy(){this.helper.imgSub&&this.helper.imgSub.unsubscribe(),this.helper=new m}initImage(e){let t=this.document.createElement("img");t.onerror=()=>{this.onImgError(i,t)};let i=this.element.nativeElement;i.innerHTML="",this.setStyling(t),t.src=e,this.renderer.appendChild(i,t),this.setAriaLabel(this.ariaLabel),this.helper.loaded=!0,this.copyNgContentAttribute(i,t)}initSvg(e){if(this.helper.loaded||!e)return;let t=e.cloneNode(!0);this.setStyling(t);let i=this.element.nativeElement;i.innerHTML="",this.renderer.appendChild(i,t),this.helper.loaded=!0,!(this.ariaLabel===void 0&&i.firstChild.hasAttribute("aria-label"))&&this.ariaLabel&&this.setAriaLabel(this.ariaLabel),this.copyNgContentAttribute(i,t)}setAriaLabel(e){let t=this.element.nativeElement.firstChild;t&&(e===""?(this.renderer.setAttribute(t,"aria-hidden","true"),this.renderer.removeAttribute(t,"aria-label")):(this.renderer.removeAttribute(t,"aria-hidden"),this.renderer.setAttribute(t,"aria-label",e)))}setStyling(e){this.element.nativeElement.style.display="flex",this.element.nativeElement.style.justifyContent="center",this.element.nativeElement.style.alignItems="center",e.style.width="inherit",e.style.maxWidth="inherit",e.style.height="inherit",e.style.maxHeight="inherit"}onImgError(e,t){this.renderer.removeChild(e,t);let i=document.createRange().createContextualFragment(this.imgService.defaultSvg);this.renderer.appendChild(e,i),setTimeout(()=>{this.renderer.setAttribute(e.firstChild,"aria-label","A broken or missing image")})}copyNgContentAttribute(e,t){let i=e.attributes;for(let n=0;n<i.length;n+=1){let a=i.item(n);if(a&&a.name.startsWith("_ngcontent")){this.setNgContentAttribute(t,a.name);break}}}setNgContentAttribute(e,t){this.renderer.setAttribute(e,t,"");for(let i=0;i<e.childNodes.length;i+=1){let n=e.childNodes[i];n instanceof Element&&this.setNgContentAttribute(n,t)}}static \u0275fac=function(t){return new(t||r)(s(S),s(I),s(l),s(o),s(L))};static \u0275cmp=C({type:r,selectors:[["ipi-img"]],inputs:{src:"src",ariaLabel:"ariaLabel"},features:[b],ngContentSelectors:j,decls:1,vars:0,template:function(t,i){t&1&&(E(),y(0))},encapsulation:2})};export{N as a};
