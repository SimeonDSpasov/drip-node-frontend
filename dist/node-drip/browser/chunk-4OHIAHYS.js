import{j as m}from"./chunk-XSVUNA7Q.js";import{h as p,i as s,j as l,k as v}from"./chunk-IVAB2QGM.js";import{R as o,W as i,d as n,na as u,r as c}from"./chunk-KGVT5ALD.js";var a=class t{constructor(e,r){this.xSSService=e;this.httpService=r}getUser(){let e=s.apiUrl+s.endpoints.user.getUser;return this.httpService.get(e)}getEndUsersAsAdmin(){let e=s.apiUrl+s.endpoints.user.getEndUsersAsAdmin;return this.httpService.get(e)}static \u0275fac=function(r){return new(r||t)(i(l),i(v))};static \u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})};var f=class t{constructor(e,r,b){this.router=e;this.storageService=r;this.requestsUserService=b}user=u(null);isUserLogged(){return!!this.storageService.getItem("accessToken")}isUserAdmin(){return this.user()?this.user().role===1:!1}isUserMasterAdmin(){return this.user()?this.user().role===2:!1}setUserFromDatabase(){return n(this,null,function*(){if(!this.isUserLogged())return 401;let e=this.requestsUserService.getUser(),r=yield c(e);switch(r.status){case 200:this.user.set(r.data);break;case 403:this.router.navigate(["suspended"])}return r.status})}logout(){return n(this,null,function*(){this.storageService.clear(),this.user.set(null),yield this.router.navigate([""])})}static \u0275fac=function(r){return new(r||t)(i(m),i(p),i(a))};static \u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})};export{f as a};
