import{g as u,i as s,j as f,k as v}from"./chunk-IVAB2QGM.js";import{R as a,W as i,d as c,k as n,r as p,z as m}from"./chunk-KGVT5ALD.js";var o=class t{constructor(r,e){this.xSSService=r;this.httpService=e}getRate(){let r=s.apiUrl+s.endpoints.exchangeRate.getRate;return this.httpService.get(r)}static \u0275fac=function(e){return new(e||t)(i(f),i(v))};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};var l=class t{constructor(r,e){this.requestsExchangeRateService=r;this.platformService=e;this.platformService.isServer()||(this.fetchRate(),m(this.CACHE_TIME,this.CACHE_TIME).subscribe(()=>{this.fetchRate()}))}rateSubject=new n(null);CACHE_TIME=1e3*60*5;fetchRate(){return c(this,null,function*(){let r=this.requestsExchangeRateService.getRate(),e=yield p(r);switch(e.status){case 200:console.log("Rate fetched:",e.data.rate),this.rateSubject.next(e.data.rate);break;default:break}})}getRate(){return this.rateSubject.value}getRateObservable(){return this.rateSubject.asObservable()}static \u0275fac=function(e){return new(e||t)(i(o),i(u))};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};export{l as a};
